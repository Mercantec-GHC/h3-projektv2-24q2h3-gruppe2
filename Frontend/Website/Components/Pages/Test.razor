@page "/test"
@rendermode InteractiveServer




    <h1>JS SDK</h1>

    <input id="username" type="text" placeholder="Username" />

    <input id="email" type="email" placeholder="Email" />

    <input id="password" type="password" placeholder="Password" />

    <button id="createButton">Create User</button>

    <h2>All Users:</h2>
    <ul id="userList"></ul>

    <script type="text/javascript" src="https://npmcdn.com/parse/dist/parse.min.js"></script>
    <script>
        async function initializeParse() {
            Parse.initialize("Gmaihn4mHp43MuaV3YBrd6xdi7DfYZzfcISiUbbP", "Feq2RCoGifWwR8HqbNDNSjFyakpOXbdPPqHzIHQ7");
            Parse.serverURL = "https://parseapi.back4app.com/";
        }

        async function createParseUser() {
            try {
                await initializeParse();
                let user = new Parse.User();
                user.set("username", document.getElementById("username").value);
                user.set("email", document.getElementById("email").value);
                user.set("password", document.getElementById("password").value);
                user = await user.save();
                if (user !== null) {
                    alert(`New object created with success! ObjectId: ${user.id}, ${user.get("username")}`);
                    // Clear input fields after successful creation
                    document.getElementById("username").value = "";
                    document.getElementById("email").value = "";
                    document.getElementById("password").value = "";
                    // Refresh user list
                    displayAllUsers();
                }
            } catch (error) {
                alert(`Error: ${error.message}`);
            }
        }

        async function displayAllUsers() {
            try {
                await initializeParse();
                const User = Parse.Object.extend("User");
                const query = new Parse.Query(User);
                const users = await query.find();
                const userList = document.getElementById("userList");
                // Clear previous list items
                userList.innerHTML = "";
                users.forEach(user => {
                    const li = document.createElement("li");
                    li.textContent = `Username: ${user.get("username")}, Email: ${user.get("email")}`;
                    userList.appendChild(li);
                });
            } catch (error) {
                console.error("Error fetching users:", error);
            }
        }

        document.getElementById("createButton").addEventListener("click", createParseUser);

        // Display all users on page load
        displayAllUsers();
    </script>



@code {

    
}
